<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Carte secrète</title>

<style>
body{
  margin:0;
  background:#000;
  font-family: Arial, sans-serif;
  color:white;
}
.page{
  max-width:420px;
  margin:auto;
  min-height:100vh;
  display:flex;
  flex-direction:column;
}
.top{
  padding:10px;
}
.top button{
  background:none;
  border:none;
  color:#2b7cff;
  font-size:16px;
}
.map-box{
  position:relative;
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
}
.map-box img.map{
  width:100%;
  max-height:80vh;
  object-fit:contain;
  border-radius:14px;
}
.lock{
  position:absolute;
  width:42px;
  cursor:pointer;
  opacity:0.4;
}
#lock1{ top:55%; left:40%; }
#lock2{ top:45%; left:55%; }
#lock3{ top:60%; left:60%; }

.question{
  display:none;
  background:#f3e3b3;
  color:#4a2d00;
  margin:10px;
  padding:12px;
  border-radius:14px;
}
.question input{
  width:70%;
  padding:8px;
  border-radius:8px;
  border:1px solid #b08a3c;
}
.question button{
  padding:8px 12px;
  border:none;
  border-radius:8px;
  background:#8a5a00;
  color:white;
}
#feedback{
  margin-top:6px;
  color:#b00000;
}
.next{
  padding:12px;
}
.next button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#2b7cff;
  color:white;
  font-size:16px;
  opacity:0.4;
}
</style>
</head>

<body>
<div class="page">

  <div class="top">
    <button onclick="location.href='chapter1.html'">← Retour</button>
  </div>

  <div class="map-box">
    <img src="map.jpg" class="map">

    <img src="lock.png" id="lock1" class="lock" onclick="openQ(1)">
    <img src="lock.png" id="lock2" class="lock" onclick="openQ(2)">
    <img src="lock.png" id="lock3" class="lock" onclick="openQ(3)">
  </div>

  <div class="question" id="qbox">
    <div id="qtext"></div>
    <input id="answer" placeholder="Écris ta réponse">
    <button onclick="check()">OK</button>
    <div id="feedback"></div>
  </div>

  <div class="next">
    <button id="nextBtn" onclick="location.href='chapter4.html'">
      Continuer
    </button>
  </div>

</div>

<script>
let current = 0;
let unlocked = 0;

const data = {
  1:{q:"Paris est une… ?", a:["ville","capitale"]},
  2:{q:"Paris est en… ?", a:["france"]},
  3:{q:"On parle… à Paris.", a:["français","francais"]}
};

document.getElementById("lock1").style.opacity="1";

function openQ(n){
  if(n!==unlocked+1) return;
  current=n;
  document.getElementById("qbox").style.display="block";
  document.getElementById("qtext").innerText=data[n].q;
  document.getElementById("answer").value="";
  document.getElementById("feedback").innerText="";
}

function check(){
  const val=document.getElementById("answer").value.trim().toLowerCase();
  const good=data[current].a;

  if(good.includes(val)){
    document.getElementById("lock"+current).src="unlock.png";
    unlocked++;
    document.getElementById("qbox").style.display="none";

    if(unlocked<3){
      document.getElementById("lock"+(unlocked+1)).style.opacity="1";
    } else {
      document.getElementById("nextBtn").style.opacity="1";
    }
  } else {
    document.getElementById("feedback").innerText="Essaye encore…";
  }
}
</script>

</body>
</html>
