<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chapitre 9 â€“ Les mots cachÃ©s</title>
<style>
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:linear-gradient(to bottom,#0b1d3a,#000);
  color:white;
  text-align:center;
}
.page{max-width:480px;margin:auto;padding:40px 16px;}
h2{font-size:28px}
.letters,.slots{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin:20px 0}
.letter{
  width:48px;height:48px;border-radius:12px;
  background:#2b7cff;color:white;
  display:flex;align-items:center;justify-content:center;
  font-size:22px;cursor:pointer;
}
.slot{
  width:48px;height:48px;border:2px dashed #6fb3ff;
  border-radius:12px;display:flex;align-items:center;justify-content:center;
  font-size:22px
}
.hidden{display:none}
.overlay{
  position:fixed;inset:0;
  background:rgba(0,0,0,.85);
  display:none;align-items:center;justify-content:center;flex-direction:column;
}
.overlay img{
  max-width:90%;max-height:80%;border-radius:16px;
}
.btn{
  margin-top:24px;padding:16px 40px;border:none;border-radius:22px;
  background:#2b7cff;color:white;font-size:20px;font-weight:bold;
}
</style>
</head>
<body>

<div class="page">
  <h2 id="title">ðŸ”Ž Trouve le mot cachÃ©</h2>
  <div class="slots" id="slots"></div>
  <div class="letters" id="letters"></div>
</div>

<div class="overlay" id="overlay">
  <img id="img" src="">
</div>

<script>
const words = [
  {w:"SEINE", img:"seine.jpg"},
  {w:"LOUVRE", img:"louvre.jpg"},
  {w:"MONTMARTRE", img:"montmartre.jpg"}
];

let index = 0;
let current = "";

function shuffle(arr){
  return arr.sort(()=>Math.random()-0.5);
}

function loadWord(){
  current = "";
  const word = words[index].w.split("");
  const slots = document.getElementById("slots");
  const letters = document.getElementById("letters");
  slots.innerHTML = "";
  letters.innerHTML = "";

  word.forEach(()=> {
    const s = document.createElement("div");
    s.className="slot";
    slots.appendChild(s);
  });

  shuffle(word).forEach(ch=>{
    const l = document.createElement("div");
    l.className="letter";
    l.textContent=ch;
    l.onclick=()=>pick(ch,l);
    letters.appendChild(l);
  });
}

function pick(ch, el){
  const slots = document.querySelectorAll(".slot");
  for(let s of slots){
    if(!s.textContent){
      s.textContent = ch;
      el.style.visibility="hidden";
      current += ch;
      break;
    }
  }
  if(current.length === words[index].w.length){
    if(current === words[index].w){
      showImage();
    } else {
      setTimeout(loadWord,800);
    }
  }
}

function showImage(){
  const ov = document.getElementById("overlay");
  const img = document.getElementById("img");
  img.src = words[index].img;
  ov.style.display="flex";

  setTimeout(()=>{
    ov.style.display="none";
    index++;
    if(index < words.length){
      loadWord();
    } else {
      document.querySelector(".page").innerHTML =
        `<h2>ðŸŽ‰ Paris est ouvert !</h2>
         <button class="btn" onclick="location.href='chapter10.html'">Continuer â†’</button>`;
    }
  },7000);
}

loadWord();
</script>

</body>
</html>
