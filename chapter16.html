<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chapitre 16 ‚Äì √âcoute dans l‚Äôombre</title>

<style>
body{
  margin:0;
  font-family:"Cinzel","Times New Roman",serif;
  background:black;
  color:white;
  text-align:center;
}

.back{
  position:fixed;top:12px;left:12px;
  color:#6fb3ff;text-decoration:none;font-size:14px;z-index:10;
}

.scene{
  min-height:100vh;
  background:url("Diyor-wall-catacombe.jpeg") center/cover no-repeat;
  display:flex;
  flex-direction:column;
  justify-content:flex-start;
  align-items:center;
  padding:40px 16px;
}

h2{
  font-size:28px;
  text-shadow:0 0 14px rgba(255,200,120,.9);
}

.instruction{
  margin:12px 0 18px;
  font-size:20px;
  max-width:420px;
  text-shadow:0 0 12px rgba(255,210,140,.9);
  color:#fff6e0;
}

.play{
  margin:18px 0;
  padding:14px 26px;
  border-radius:20px;
  border:2px solid #ffd08a;
  background:rgba(255,180,80,.15);
  color:#fff6e0;
  font-size:18px;
  cursor:pointer;
  box-shadow:0 0 16px rgba(255,180,80,.8);
}

.choices{
  display:flex;
  flex-direction:column;
  gap:14px;
  margin-top:10px;
}

.choice{
  padding:14px 20px;
  border-radius:16px;
  border:2px solid rgba(255,220,150,.8);
  background:rgba(0,0,0,.45);
  color:#fff;
  font-size:20px;
  cursor:pointer;
}

.choice:hover{
  background:rgba(255,200,120,.2);
}

#msg{
  margin-top:18px;
  font-size:20px;
  min-height:28px;
  text-shadow:0 0 10px rgba(255,200,120,.9);
}

.flash{
  animation:flash 1s;
}

@keyframes flash{
  0%{box-shadow:0 0 0 rgba(255,220,120,0)}
  50%{box-shadow:0 0 80px rgba(255,220,120,.9)}
  100%{box-shadow:0 0 0 rgba(255,220,120,0)}
}

.btn{
  margin-top:30px;
  padding:16px 40px;
  border:none;
  border-radius:22px;
  background:#2b7cff;
  color:white;
  font-size:20px;
  font-weight:bold;
  display:none;
}
</style>
</head>

<body>
<a class="back" href="chapter15.html">‚Üê Retour</a>

<!-- Audios -->
<audio id="a1" src="silence.mp3"></audio>
<audio id="a2" src="ombre.mp3"></audio>
<audio id="a3" src="secret.mp3"></audio>

<div class="scene" id="scene">
  <h2 id="title">üéß √âcoute dans l‚Äôombre</h2>

  <div class="instruction">
    √âcoute attentivement le mot chuchot√© par le mur.<br>
    Puis choisis le bon mot pour ouvrir le passage.
  </div>

  <button class="play" id="playBtn">üîä √âcouter</button>

  <div class="choices" id="choices"></div>
  <div id="msg"></div>

  <button class="btn" id="next" onclick="location.href='chapter17.html'">
    Continuer ‚Üí
  </button>
</div>

<script>
const tasks = [
  {
    audio:"a1",
    words:["silence","soleil","secret"],
    good:"silence",
    bad:"Non‚Ä¶ √©coute mieux‚Ä¶",
    goodMsg:"Le mur brille d‚Äôor‚Ä¶"
  },
  {
    audio:"a2",
    words:["arbre","ombre","homme"],
    good:"ombre",
    bad:"Les ombres te regardent‚Ä¶",
    goodMsg:"Une ligne de lumi√®re appara√Æt‚Ä¶"
  },
  {
    audio:"a3",
    words:["sacr√©","secret","serpent"],
    good:"secret",
    bad:"Ce n‚Äôest pas le bon mot‚Ä¶",
    goodMsg:"Le mur se fissure‚Ä¶"
  }
];

let i = 0;

function load(){
  const t = tasks[i];
  document.getElementById("msg").innerText = "";
  const c = document.getElementById("choices");
  c.innerHTML = "";

  t.words.forEach(w=>{
    const d = document.createElement("div");
    d.className="choice";
    d.innerText = w;
    d.onclick = ()=>check(w);
    c.appendChild(d);
  });

  document.getElementById("playBtn").onclick = ()=>{
    document.getElementById(t.audio).currentTime = 0;
    document.getElementById(t.audio).play();
  };
}

function check(w){
  const t = tasks[i];
  const sc = document.getElementById("scene");

  if(w === t.good){
    document.getElementById("msg").innerText = t.goodMsg;
    sc.classList.add("flash");

    setTimeout(()=>{
      sc.classList.remove("flash");
      i++;
      if(i < tasks.length){
        load();
      } else {
        document.getElementById("choices").style.display="none";
        document.getElementById("playBtn").style.display="none";
        document.getElementById("title").innerText = "‚ú® Le passage secret s‚Äôouvre‚Ä¶";
        document.getElementById("next").style.display="inline-block";
      }
    },900);

  } else {
    document.getElementById("msg").innerText = t.bad;
  }
}

load();
</script>
</body>
</html>
